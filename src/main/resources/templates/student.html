<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Student</title>
    <link rel="stylesheet" href="//cdn.bootcss.com/element-ui/1.1.2/theme-default/index.css">
    <script src="//cdn.bootcss.com/vue/2.3.0/vue.min.js"></script>
    <script src="//cdn.bootcss.com/element-ui/1.3.0/index.js"></script>
    <script src="//cdn.bootcss.com/vue-resource/1.0.3/vue-resource.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
</head>
<body>
<div id="app">
    <div class="header">
        <span class="logo">
            <span class="font" >学生界面</span>
                <span class="welcome" th:text="'welcome to CampusOnline : '+${StuName}+'!'"></span>
            <span class="changepwd">
                <a class="changepwd_a" onclick="changePassword()">修改密码</a>
                <script type="text/javascript">
                    function changePassword() {
                        var passWord=prompt("输入新密码：","");
                        var passWordAgain=prompt("再次输入新密码：","");
                        if(passWord==passWordAgain)
                        {
                            var xhr=new XMLHttpRequest();//新建一个XMLHttpRequest对象
                            url="/student/changePass?newPassword="+passWord;
                            xhr.open("get",url,true);//初始化请求
                            xhr.send(null);
                            alert("success");
                            window.location.replace("/login");
                        }
                        else
                        {
                            alert("密码输入不一致！");
                        }
                    }
                </script>
            </span>
            <span class="exit_login">
                <a class="exit_login_href"  onclick="exitlogin()">退出登录</a>
                <script type="text/javascript">
                    function exitlogin() {
                        $.ajax({
                            url:'/student/logout',
                            type:'post',
                            async : false,
                            success : function(msg) {
                                window.location.replace("/login");
                            },
                            error : function(XMLHttpRequest, textStatus, errorThrown) {
                                alert("error");
                            }
                        })
                    }
                </script>
            </span>
        </span>
        <span class="userinfo">

        </span>
    </div>
    <div class="main">

        <aside class="guide">
            <!--需要post 方法selectTeacher，提交选择的教师ID,递交获取可预约时间的get方法-->
            <form class="add" method="post" th:method="post" action="/student/submit">
                <div class="add_select" >
                    <a class="function_tch">选择预约</a>
                    <br>
                    <select class="select_bar" name="submitReserve">
                        <!--需要get方法，获取所有老师-->
                        <option th:each="tch:${stuReserves}" th:text="${tch.resrvTime}" th:value="${tch.resrvTime}"></option>
                    </select>
                </div>
                <div class="add_commit">
                    <input type="submit" name="select_tch" value="提交预约" onclick="">
                </div>
            </form>
        </aside>


        <div class="content">
            <div class="toolbar">
                <a>预约信息</a>
            </div>
            <form method="get">
                <div class="table">
                    <div class="table_header">
                        <table width="100%" >
                            <colgroup>
                                <col name="col_No" width="10">
                                <col name="col_StuID" width="30">
                                <col name="col_time" width="30">
                                <col name="col_TchID" width="30">
                                <col name="col_op" width="50">
                            </colgroup>
                            <thead>
                            <tr>
                                <th colspan="1" rowspan="1" class="table_No_leaf" width="10%">
                                    <div class="cell">#</div>
                                </th>
                                <th colspan="1" rowspan="1" class="table_StuID_leaf" width="20%">
                                    <div class="cell">学生ID</div>
                                </th>
                                <th colspan="1" rowspan="1" class="table_time_leaf" width="25%">
                                    <div class="cell">预约时间</div>
                                </th>
                                <th colspan="1" rowspan="1" class="table_TchID_leaf" width="20%">
                                    <div class="cell">老师ID</div>
                                </th>
                                <th colspan="1" rowspan="1" class="table_op_leaf" width="20%">
                                    <div class="cell">操作</div>
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr class="table_row" th:each="reserve:${currentReserves}">
                                <td class="table_cell">
                                    <div class="cell">
                                        <div th:text="${reserve.id}">结果</div>
                                    </div>
                                </td>
                                <td class="table_cell">
                                    <div class="cell">
                                        <div th:text="${reserve.stuID}">学生ID</div>
                                    </div>
                                </td>
                                <td class="table_cell">
                                    <div class="cell">
                                        <div th:text="${reserve.resrvTime}">预约时间</div>
                                    </div>
                                </td>
                                <td class="table_cell">
                                    <div class="cell">
                                        <div th:text="${reserve.tcherID}">教师ID</div>
                                    </div>
                                </td>
                                <td class="table_cell" width="10">
                                    <div class="cell" align="center">
                                        <a class="btn btn-info" th:href="@{/student/delete/{id}(id=${reserve.id})}"  target="_self">取消预约</a>
                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <!--
                    <div class="table_body_wrapper">
                        <table class="table_body" width="885px">
                            <colgroup>
                                <col name="col_No" width="10">
                                <col name="col_StuID" width="30">
                                <col name="col_time" width="30">
                                <col name="col_TchID" width="30">
                                <col name="col_op" width="30">
                            </colgroup>

                        </table>
                    </div>
                    -->
                </div>
            </form>

        </div>
    </div>
</div>

</body>
</html>

<script type="text/javascript">
    function submit() {

    }
</script>

<style>
    body{
        margin: 0px;
        font-size: 20px;
    }
    .header{
        position: absolute;top:0%;bottom: 88%;left: 0%;right: 0%;
        background-color: #ad19ff;
        /*line-height: 60px;
        font-size: 30px;*/
        color: white;
    }
    .logo{
        width: 30%;
        align-self: center;
    }
    .main{
        position: absolute;top:12%;bottom: 0%;left: 0%;right: 0%;
    }
    .guide{
        position: absolute;top:0%;bottom: 0%;width: 20%;
        background-color: #eef1f6;
    }
    .function{
        height: 40%;
    }
    .content{
        position: absolute;top:0%;bottom: 0%;left: 20%;right: 0%;
        margin: 8px;
    }
    .toolbar{
        height: 5%;
        padding: 0px;
        margin-bottom: 8px;
        margin-top: 0px;
    }
    .form_item{
        display: inline-block;
        line-height: 40px;
        margin-right: 8px;
        margin-bottom: 0px;
    }
    .input_text{
        height: 35px;
        vertical-align: top;
    }
    .button{
        display: inline-block;
        height: 40px;
        width: 70px;
        vertical-align: top;
        cursor: pointer;
        white-space: nowrap;
    }
    .table{
        height: 100%;
        max-width: 100%;
        border-bottom: 0px;
        border-right: 0px;
        background-color:white;
        border: #dfe6ec 1px solid;
        font-size: 14px;
        color: #1f2d3d;
    }
    .table_header{
        width: 100%;
        background-color: #dfe6ec;
    }
    .table th{
        height: 30px;
        border: 2px;
        box-sizing: border-box;
        vertical-align: middle;
    }
    .cell{
        position: relative;
        display: inline-block;
        vertical-align: middle;
        border: 1px solid #dfe6ec;
        width: 100% ;
        border: 0px;
    }
    .table tbody{
        background-color: white;
    }
    .select_bar{
        width: 97%;
        padding-right: 3px;
    }
    .add{
        height: 100%;
    }
    .add_select{
        height: 80%;
    }
    .add_commit{
        height: 20%;
    }
    .changepwd{
        position: absolute;
        right: 0;
        top: 0;
        bottom: 30px;
        left: 90%;
        color: white;
        font-size: 14px;
    }
    .exit_login{
        position: absolute;
        right: 0;
        top: 35px;
        bottom: 60px;
        left: 90%;
        color: white;
        font-size: 14px;
    }
    .btn-info{
        text-decoration: none;
    }
    .btn-info:link{
        color: blue;
    }
    .btn-info:active{
        color: aqua;
    }
    .exit_login_href{
        text-decoration: white;
    }
    .exit_login_href:link{
        color: white;
    }
    .exit_login_href:active{
        color: aqua;
    }
    .changepwd{
        cursor: pointer;
    }
    .exit_login{
        cursor: pointer;
    }
    .font{
        position: absolute;
        top: 0;
        bottom: 20%;
        left: 0;
        right: 25%;
        font-size: 125%;
        line-height: 200%;
    }
    .welcome{
        position: absolute;
        top: 80%;
        bottom: 0%;
        left: 0;
        right: 25%;
        font-size: 75%;
        line-height: 100%;
    }
</style>
